<view class="container">

<!-- ===== æˆ¿é—´æœªå¼€å§‹æ¸¸æˆ ===== -->
<view wx:if="{{!gameStarted}}">

  <!-- æˆ¿é—´ä¿¡æ¯ -->
  <view class="room-info">
    <text>æˆ¿é—´IDï¼š{{roomId}}</text>
  </view>

  <!-- æˆ¿é—´æˆå‘˜åˆ—è¡¨ -->
  <view wx:if="{{members.length}}">
    <text>æˆ¿é—´æˆå‘˜:</text>
    <block wx:for="{{members}}" wx:key="id">
      <view>
        <text>
          {{item.id}}
          {{item.ready ? 'âœ… å·²å‡†å¤‡' : 'âŒ æœªå‡†å¤‡'}}
          {{item.id === host ? 'ï¼ˆæˆ¿ä¸»ï¼‰' : ''}}
        </text>
      </view>
    </block>
  </view>

  <!-- è‡ªå·±å‡†å¤‡æŒ‰é’® -->
  <button bindtap="toggleReady">
    {{ ready ? 'å–æ¶ˆå‡†å¤‡' : 'å‡†å¤‡' }}
  </button>

  <!-- æˆ¿ä¸»å¼€å§‹æŒ‰é’® -->
  <button
    wx:if="{{playerId === host && allReady}}"
    bindtap="startGame"
  >
    å¼€å§‹æ¸¸æˆ
  </button>

</view>

<!-- ===== æ¸¸æˆç•Œé¢ ===== -->
<view wx:else>

  <!-- é¡¶éƒ¨çŠ¶æ€ -->
  <view class="status">
    <text class="role">
      {{ isDrawer ? "ğŸ¨ ä½ åœ¨ç”»ç”»" : "ğŸ‘€ ä½ åœ¨çŒœ" }}
    </text>
  </view>

  <!-- ç­”æ¡ˆï¼ˆç”»çš„äººå¯è§ï¼‰ -->
  <view class="answer" wx:if="{{isDrawer}}">
    æœ¬å±€ç­”æ¡ˆï¼š{{answer}}
  </view>

  <!-- ç”»æ¿ -->
  <canvas
    canvas-id="board"
    class="board"
    bindtouchstart="onTouchStart"
    bindtouchmove="onTouchMove"
    bindtouchend="onTouchEnd"
  ></canvas>

  <!-- çŒœè¯åŒºåŸŸ -->
  <view wx:if="{{!isDrawer}}" class="guess-box">
    <input
      placeholder="è¯·è¾“å…¥ä½ çŒœçš„ç­”æ¡ˆ"
      value="{{guessText}}"
      bindinput="onGuessInput"
    />
    <button bindtap="submitGuess">æäº¤</button>
  </view>

  <!-- æ¸…ç©ºç”»å¸ƒ -->
  <button wx:if="{{isDrawer}}" bindtap="clearBoard">
    æ¸…ç©ºç”»å¸ƒ
  </button>

</view>

</view>
